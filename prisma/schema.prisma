generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // Changed from "mysql" to "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(uuid()) // UUID works in PostgreSQL
  email        String        @unique
  password     String
  name         String?
  usage        Int           @default(3)
  transactions Transaction[]
  dividends    Dividend[]
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

model Transaction {
  id                Int      @id @default(autoincrement()) // SERIAL in PostgreSQL
  date              DateTime
  transactionType   String
  symbol            String
  operationType     String
  status            String
  currency          String
  orderQuantity     Float
  orderAmount       Float
  executedQuantity  Float
  averagePrice      Float
  transactionFee    Float
  transactionAmount Float
  userId            String
  user              User     @relation(fields: [userId], references: [id])
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model Dolar {
  id                 Int    @id @default(autoincrement())
  gecerliOlduguTarih String
  dovizAlis          Float
}

model YiUfe {
  id      Int    @id @default(autoincrement())
  yil     Int
  ocak    Float
  subat   Float
  mart    Float
  nisan   Float
  mayis   Float
  haziran Float
  temmuz  Float
  agustos Float
  eylul   Float
  ekim    Float
  kasim   Float
  aralik  Float?
}

model Dividend {
  id          Int      @id @default(autoincrement())
  paymentDate DateTime
  symbol      String
  grossAmount Float
  taxWithheld Float
  netAmount   Float
  userId      String
  user        User     @relation(fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
